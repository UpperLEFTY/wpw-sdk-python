time="2017-08-17T12:22:07+01:00" level=debug msg="End log setup" 
time="2017-08-17T12:22:07+01:00" level=debug msg="After initLogFile()" 
time="2017-08-17T12:22:07+01:00" level=debug msg="Before startRPC()" 
time="2017-08-17T12:22:07+01:00" level=debug msg="Before startRPC()" 
time="2017-08-17T12:22:07+01:00" level=debug msg="Before assign RPC config." 
time="2017-08-17T12:22:07+01:00" level=debug msg="After assign RPC config." 
time="2017-08-17T12:22:07+01:00" level=debug msg="Before rpc.NewService" Configuration: ="{Protocol:binary Framed:false Buffered:false Host:127.0.0.1 Port:8778 Secure:false BufferSize:8192 Loglevel: Logfile: CallbackPort:0}" 
time="2017-08-17T12:22:07+01:00" level=debug msg="begin rpc.ServiceImpl.NewService()" Config="{Protocol:binary Framed:false Buffered:false Host:127.0.0.1 Port:8778 Secure:false BufferSize:8192 Loglevel: Logfile: CallbackPort:0}" 
time="2017-08-17T12:22:07+01:00" level=debug msg="end rpc.ServiceImpl.NewService()" 
time="2017-08-17T12:22:07+01:00" level=debug msg="After rpc.NewService" 
time="2017-08-17T12:22:07+01:00" level=debug msg="Attempting to start RPC interface on port" port=8778 
time="2017-08-17T12:22:07+01:00" level=debug msg="begin rpc.ServiceImpl.start()" 
time="2017-08-17T12:22:07+01:00" level=debug msg="Begin RPC.WPWithinHandler.NewWPWithinHander()" 
time="2017-08-17T12:22:07+01:00" level=debug msg="End RPC.WPWithinHandler.NewWPWithinHander()" 
time="2017-08-17T12:22:07+01:00" level=debug msg="Starting the rpc server on...: 127.0.0.1:8778" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Begin RPC.WPWithinHandler.Setup()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="begin wpwithin.Initialise()" description="an example consumer device" name=my-device 
time="2017-08-17T12:22:12+01:00" level=debug msg="Will perform parameter validation" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Parameter validation passed" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Will create new core.SDKFactory" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Did create new core.SDKFactory" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Will create new core.Core" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Did create new core.Core" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Will call doWebSocketLogSetup()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Begin wpwithin.doWebSocketLogSetup()" Configuration={true 8182 debug,error,fatal} 
time="2017-08-17T12:22:12+01:00" level=debug msg="Config.WSLogEnable is true -- proceed to setup WS Logger" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Clean up Config.WSLogLevel -- remove spaces" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Split up Config.WSLogLevel to array -- comma delimiter" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Setting up logger to support the specified log levels." log levels=[debug error fatal] 
time="2017-08-17T12:22:12+01:00" level=debug msg="Attempt to get external IPv4 address" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Did get external IPv4" IPv4=172.17.0.149 
time="2017-08-17T12:22:12+01:00" level=debug msg="will call wslog.Initialise()" ip_add=172.17.0.149 log levels=[debug error fatal] ws_port=8182 
time="2017-08-17T12:22:12+01:00" level=info msg="Did set up WebSocket logger @ http://172.17.0.149:8182" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Did call wslog.Initialise()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="End doWebSocketLogSetup()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="After call doWebSocketLogSetup()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Will call Factory.GetDevice()" description="an example consumer device" name=my-device 
time="2017-08-17T12:22:12+01:00" level=debug msg="Will call Factory.GetOrderManager()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="After call Factory.GetOrderManager()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Will call Factory.GetSvcBroadcaster()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="After call Factory.GetSvcBroadcaster()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Will call Factory.GetSvcScanner()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="After call Factory.GetSvcScanner()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="end wpwithin.Initialise()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="wp.callback not set, not setting handler in WPWithin." 
time="2017-08-17T12:22:12+01:00" level=debug msg="End RPC.WPWithinHandler.Setup()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Begin RPC.WPWithinHandler.GetDevice()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Begin wpwithin.GetDevice()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="End wpwithin.GetDevice()" Device=&{6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f my-device an example consumer device map[] 172.17.0.149} 
time="2017-08-17T12:22:12+01:00" level=debug msg="Found 0 services for device" 
time="2017-08-17T12:22:12+01:00" level=debug msg="End RPC.WPWithinHandler.GetDevice()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Begin RPC.WPWithinHandler.ServiceDiscovery()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Begin wpwithin.DeviceDiscovery()" timeoutMillis=8000 
time="2017-08-17T12:22:12+01:00" level=debug msg="Will call wp.core.SvcScanner.ScanForServices()" 
time="2017-08-17T12:22:12+01:00" level=debug msg="Begin ScanForServices(timeout = 8000)" 
time="2017-08-17T12:22:22+01:00" level=debug msg="Finish ScanForServices()" Found=0 Run=true Timed out=true 
time="2017-08-17T12:22:22+01:00" level=debug msg="After call wp.core.SvcScanner.ScanForService()" 
time="2017-08-17T12:22:22+01:00" level=debug msg="End wpwithin.DeviceDiscovery()" Search result=[] 
time="2017-08-17T12:22:22+01:00" level=debug msg="End RPC.WPWithinHandler.ServiceDiscovery()" 
time="2017-08-17T12:24:05+01:00" level=debug msg="End log setup" 
time="2017-08-17T12:24:05+01:00" level=debug msg="After initLogFile()" 
time="2017-08-17T12:24:05+01:00" level=debug msg="Before startRPC()" 
time="2017-08-17T12:24:05+01:00" level=debug msg="Before startRPC()" 
time="2017-08-17T12:24:05+01:00" level=debug msg="Before assign RPC config." 
time="2017-08-17T12:24:05+01:00" level=debug msg="After assign RPC config." 
time="2017-08-17T12:24:05+01:00" level=debug msg="Before rpc.NewService" Configuration: ="{Protocol:binary Framed:false Buffered:false Host:127.0.0.1 Port:9090 Secure:false BufferSize:8192 Loglevel: Logfile: CallbackPort:0}" 
time="2017-08-17T12:24:05+01:00" level=debug msg="begin rpc.ServiceImpl.NewService()" Config="{Protocol:binary Framed:false Buffered:false Host:127.0.0.1 Port:9090 Secure:false BufferSize:8192 Loglevel: Logfile: CallbackPort:0}" 
time="2017-08-17T12:24:05+01:00" level=debug msg="end rpc.ServiceImpl.NewService()" 
time="2017-08-17T12:24:05+01:00" level=debug msg="After rpc.NewService" 
time="2017-08-17T12:24:05+01:00" level=debug msg="Attempting to start RPC interface on port" port=9090 
time="2017-08-17T12:24:05+01:00" level=debug msg="begin rpc.ServiceImpl.start()" 
time="2017-08-17T12:24:05+01:00" level=debug msg="Begin RPC.WPWithinHandler.NewWPWithinHander()" 
time="2017-08-17T12:24:05+01:00" level=debug msg="End RPC.WPWithinHandler.NewWPWithinHander()" 
time="2017-08-17T12:24:05+01:00" level=debug msg="Starting the rpc server on...: 127.0.0.1:9090" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Begin RPC.WPWithinHandler.Setup()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="begin wpwithin.Initialise()" description="Example WorldpayWithin producer" name="Producer Example CHANGE ME" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will perform parameter validation" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Parameter validation passed" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will create new core.SDKFactory" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did create new core.SDKFactory" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will create new core.Core" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did create new core.Core" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will call doWebSocketLogSetup()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Begin wpwithin.doWebSocketLogSetup()" Configuration={true 8182 debug,error,fatal} 
time="2017-08-17T12:24:10+01:00" level=debug msg="Config.WSLogEnable is true -- proceed to setup WS Logger" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Clean up Config.WSLogLevel -- remove spaces" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Split up Config.WSLogLevel to array -- comma delimiter" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Setting up logger to support the specified log levels." log levels=[debug error fatal] 
time="2017-08-17T12:24:10+01:00" level=debug msg="Attempt to get external IPv4 address" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did get external IPv4" IPv4=172.17.0.149 
time="2017-08-17T12:24:10+01:00" level=debug msg="will call wslog.Initialise()" ip_add=172.17.0.149 log levels=[debug error fatal] ws_port=8182 
time="2017-08-17T12:24:10+01:00" level=info msg="Did set up WebSocket logger @ http://172.17.0.149:8182" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did call wslog.Initialise()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="End doWebSocketLogSetup()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="After call doWebSocketLogSetup()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will call Factory.GetDevice()" description="Example WorldpayWithin producer" name="Producer Example CHANGE ME" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will call Factory.GetOrderManager()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="After call Factory.GetOrderManager()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will call Factory.GetSvcBroadcaster()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="After call Factory.GetSvcBroadcaster()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will call Factory.GetSvcScanner()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="After call Factory.GetSvcScanner()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="end wpwithin.Initialise()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="wp.callback not set, not setting handler in WPWithin." 
time="2017-08-17T12:24:10+01:00" level=debug msg="End RPC.WPWithinHandler.Setup()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="RPC.WPWithinHandler.InitProducer()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Begin wpwithin.InitProducer()" pspConfig=map[hte_private_key:T_S_3bdadc9c-54e0-4587-8d91-29813060fecd merchant_service_key:T_S_3bdadc9c-54e0-4587-8d91-29813060fecd merchant_client_key:T_C_97e8cbaa-14e0-4b1c-b2af-469daf8f1356 api_endpoint:https://api.worldpay.com/v1 psp_name:worldpayonlinepayments hte_public_key:T_C_97e8cbaa-14e0-4b1c-b2af-469daf8f1356] 
time="2017-08-17T12:24:10+01:00" level=debug msg="Is pspConfig parameter nil? false" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will call Factory.GetPSPMerchant()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did call Factory.GetPSPMerchant()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will call hte.NewHTECredential()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did call hte.NewHTECredential()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will call Factory.GetHTEServiceHandler()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did call Factory.GetHTEServiceHandler()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will call Factory.GetHTE()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did call Factory.GetHTE()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will setup channel of type error make(chan error)" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did call make(chan error)" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will spin up goroutine to start HTE service" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did spin up go routine.. this is main thread." 
time="2017-08-17T12:24:10+01:00" level=debug msg="Inside go routine, will call wp.core.HTE.Start()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did wait 750ms, no error" 
time="2017-08-17T12:24:10+01:00" level=debug msg="End wpwithin.InitProducer()" Error result=<nil> 
time="2017-08-17T12:24:10+01:00" level=debug msg="Begin RPC.WPWithinHandler.AddService()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="End RPC.WPWithinHandler.AddService()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Begin wpwithin.AddService()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Is wp.core.Device.Services map nil? true" 
time="2017-08-17T12:24:10+01:00" level=debug msg="wp.core.Device.Services is nil, will make now: map[int]*types.Service" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did make wp.core.Device.Services: map[int]*types.Service" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Does wp.core.Device.Services contain service with id 1? false" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Adding service to wp.core.Device.Services as it doesn't appear to exist." 
time="2017-08-17T12:24:10+01:00" level=debug msg="End wpwithin.AddService()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="RPC.WPWithinHandler.StartServiceBroadcast()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Begin wpwithin.startServiceBroadcast()" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will construct types.BroadcastMessage now" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did construct types.BroadcastMessage" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will make channel of type error for catching broadcast errors from go routine." 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did make channel of type error" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Will spin up go routine to perform broadcasting" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did spin up go routine to perform broadcasting" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Inside go routine, will call wp.core.SvcBroadcaster.StartBroadcast(" message={Example WorldpayWithin producer 172.17.0.149 64521 6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f  http://} timeoutmillis=20000 
time="2017-08-17T12:24:10+01:00" level=debug msg="Start svc broadcast" 
time="2017-08-17T12:24:10+01:00" level=debug msg=Broadcasting.. 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did open UDP broadcast socket" 
time="2017-08-17T12:24:10+01:00" level=debug msg="Did successfully write broadcast message" 
time="2017-08-17T12:24:11+01:00" level=debug msg="End wpwithin.startServiceBroadcast()" Result err=<nil> 
time="2017-08-17T12:24:15+01:00" level=debug msg=Broadcasting.. 
time="2017-08-17T12:24:15+01:00" level=debug msg="Did open UDP broadcast socket" 
time="2017-08-17T12:24:15+01:00" level=debug msg="Did successfully write broadcast message" 
time="2017-08-17T12:24:20+01:00" level=debug msg=Broadcasting.. 
time="2017-08-17T12:24:20+01:00" level=debug msg="Did open UDP broadcast socket" 
time="2017-08-17T12:24:20+01:00" level=debug msg="Did successfully write broadcast message" 
time="2017-08-17T12:24:25+01:00" level=debug msg=Broadcasting.. 
time="2017-08-17T12:24:25+01:00" level=debug msg="Did open UDP broadcast socket" 
time="2017-08-17T12:24:25+01:00" level=debug msg="Did successfully write broadcast message" 
time="2017-08-17T12:24:26+01:00" level=debug msg="End log setup" 
time="2017-08-17T12:24:26+01:00" level=debug msg="After initLogFile()" 
time="2017-08-17T12:24:26+01:00" level=debug msg="Before startRPC()" 
time="2017-08-17T12:24:26+01:00" level=debug msg="Before startRPC()" 
time="2017-08-17T12:24:26+01:00" level=debug msg="Before assign RPC config." 
time="2017-08-17T12:24:26+01:00" level=debug msg="After assign RPC config." 
time="2017-08-17T12:24:26+01:00" level=debug msg="Before rpc.NewService" Configuration: ="{Protocol:binary Framed:false Buffered:false Host:127.0.0.1 Port:8778 Secure:false BufferSize:8192 Loglevel: Logfile: CallbackPort:0}" 
time="2017-08-17T12:24:26+01:00" level=debug msg="begin rpc.ServiceImpl.NewService()" Config="{Protocol:binary Framed:false Buffered:false Host:127.0.0.1 Port:8778 Secure:false BufferSize:8192 Loglevel: Logfile: CallbackPort:0}" 
time="2017-08-17T12:24:26+01:00" level=debug msg="end rpc.ServiceImpl.NewService()" 
time="2017-08-17T12:24:26+01:00" level=debug msg="After rpc.NewService" 
time="2017-08-17T12:24:26+01:00" level=debug msg="Attempting to start RPC interface on port" port=8778 
time="2017-08-17T12:24:26+01:00" level=debug msg="begin rpc.ServiceImpl.start()" 
time="2017-08-17T12:24:26+01:00" level=debug msg="Begin RPC.WPWithinHandler.NewWPWithinHander()" 
time="2017-08-17T12:24:26+01:00" level=debug msg="End RPC.WPWithinHandler.NewWPWithinHander()" 
time="2017-08-17T12:24:26+01:00" level=debug msg="Starting the rpc server on...: 127.0.0.1:8778" 
time="2017-08-17T12:24:30+01:00" level=debug msg="Did close UDP broadcast socket" 
time="2017-08-17T12:24:30+01:00" level=debug msg="Finished broadcasting" Run=true Timed out=true 
time="2017-08-17T12:24:31+01:00" level=debug msg="Begin RPC.WPWithinHandler.Setup()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="begin wpwithin.Initialise()" description="an example consumer device" name=my-device 
time="2017-08-17T12:24:31+01:00" level=debug msg="Will perform parameter validation" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Parameter validation passed" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Will create new core.SDKFactory" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Did create new core.SDKFactory" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Will create new core.Core" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Did create new core.Core" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Will call doWebSocketLogSetup()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Begin wpwithin.doWebSocketLogSetup()" Configuration={true 8182 debug,error,fatal} 
time="2017-08-17T12:24:31+01:00" level=debug msg="Config.WSLogEnable is true -- proceed to setup WS Logger" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Clean up Config.WSLogLevel -- remove spaces" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Split up Config.WSLogLevel to array -- comma delimiter" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Setting up logger to support the specified log levels." log levels=[debug error fatal] 
time="2017-08-17T12:24:31+01:00" level=debug msg="Attempt to get external IPv4 address" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Did get external IPv4" IPv4=172.17.0.149 
time="2017-08-17T12:24:31+01:00" level=debug msg="will call wslog.Initialise()" ip_add=172.17.0.149 log levels=[debug error fatal] ws_port=8182 
time="2017-08-17T12:24:31+01:00" level=info msg="Did set up WebSocket logger @ http://172.17.0.149:8182" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Did call wslog.Initialise()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="End doWebSocketLogSetup()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="After call doWebSocketLogSetup()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Will call Factory.GetDevice()" description="an example consumer device" name=my-device 
time="2017-08-17T12:24:31+01:00" level=debug msg="Will call Factory.GetOrderManager()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="After call Factory.GetOrderManager()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Will call Factory.GetSvcBroadcaster()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="After call Factory.GetSvcBroadcaster()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Will call Factory.GetSvcScanner()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="After call Factory.GetSvcScanner()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="end wpwithin.Initialise()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="wp.callback not set, not setting handler in WPWithin." 
time="2017-08-17T12:24:31+01:00" level=debug msg="End RPC.WPWithinHandler.Setup()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Begin RPC.WPWithinHandler.GetDevice()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Begin wpwithin.GetDevice()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="End wpwithin.GetDevice()" Device=&{6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f my-device an example consumer device map[] 172.17.0.149} 
time="2017-08-17T12:24:31+01:00" level=debug msg="Found 0 services for device" 
time="2017-08-17T12:24:31+01:00" level=debug msg="End RPC.WPWithinHandler.GetDevice()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Begin RPC.WPWithinHandler.ServiceDiscovery()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Begin wpwithin.DeviceDiscovery()" timeoutMillis=8000 
time="2017-08-17T12:24:31+01:00" level=debug msg="Will call wp.core.SvcScanner.ScanForServices()" 
time="2017-08-17T12:24:31+01:00" level=debug msg="Begin ScanForServices(timeout = 8000)" 
time="2017-08-17T12:24:41+01:00" level=debug msg="Finish ScanForServices()" Found=0 Run=true Timed out=true 
time="2017-08-17T12:24:41+01:00" level=debug msg="After call wp.core.SvcScanner.ScanForService()" 
time="2017-08-17T12:24:41+01:00" level=debug msg="End wpwithin.DeviceDiscovery()" Search result=[] 
time="2017-08-17T12:24:41+01:00" level=debug msg="End RPC.WPWithinHandler.ServiceDiscovery()" 
time="2017-08-17T12:24:51+01:00" level=debug msg="End log setup" 
time="2017-08-17T12:24:51+01:00" level=debug msg="After initLogFile()" 
time="2017-08-17T12:24:51+01:00" level=debug msg="Before startRPC()" 
time="2017-08-17T12:24:51+01:00" level=debug msg="Before startRPC()" 
time="2017-08-17T12:24:51+01:00" level=debug msg="Before assign RPC config." 
time="2017-08-17T12:24:51+01:00" level=debug msg="After assign RPC config." 
time="2017-08-17T12:24:51+01:00" level=debug msg="Before rpc.NewService" Configuration: ="{Protocol:binary Framed:false Buffered:false Host:127.0.0.1 Port:9090 Secure:false BufferSize:8192 Loglevel: Logfile: CallbackPort:0}" 
time="2017-08-17T12:24:51+01:00" level=debug msg="begin rpc.ServiceImpl.NewService()" Config="{Protocol:binary Framed:false Buffered:false Host:127.0.0.1 Port:9090 Secure:false BufferSize:8192 Loglevel: Logfile: CallbackPort:0}" 
time="2017-08-17T12:24:51+01:00" level=debug msg="end rpc.ServiceImpl.NewService()" 
time="2017-08-17T12:24:51+01:00" level=debug msg="After rpc.NewService" 
time="2017-08-17T12:24:51+01:00" level=debug msg="Attempting to start RPC interface on port" port=9090 
time="2017-08-17T12:24:51+01:00" level=debug msg="begin rpc.ServiceImpl.start()" 
time="2017-08-17T12:24:51+01:00" level=debug msg="Begin RPC.WPWithinHandler.NewWPWithinHander()" 
time="2017-08-17T12:24:51+01:00" level=debug msg="End RPC.WPWithinHandler.NewWPWithinHander()" 
time="2017-08-17T12:24:51+01:00" level=debug msg="Starting the rpc server on...: 127.0.0.1:9090" 
time="2017-08-17T12:24:56+01:00" level=debug msg="End log setup" 
time="2017-08-17T12:24:56+01:00" level=debug msg="After initLogFile()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Before startRPC()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Before startRPC()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Before assign RPC config." 
time="2017-08-17T12:24:56+01:00" level=debug msg="After assign RPC config." 
time="2017-08-17T12:24:56+01:00" level=debug msg="Before rpc.NewService" Configuration: ="{Protocol:binary Framed:false Buffered:false Host:127.0.0.1 Port:8778 Secure:false BufferSize:8192 Loglevel: Logfile: CallbackPort:0}" 
time="2017-08-17T12:24:56+01:00" level=debug msg="begin rpc.ServiceImpl.NewService()" Config="{Protocol:binary Framed:false Buffered:false Host:127.0.0.1 Port:8778 Secure:false BufferSize:8192 Loglevel: Logfile: CallbackPort:0}" 
time="2017-08-17T12:24:56+01:00" level=debug msg="end rpc.ServiceImpl.NewService()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="After rpc.NewService" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Attempting to start RPC interface on port" port=8778 
time="2017-08-17T12:24:56+01:00" level=debug msg="begin rpc.ServiceImpl.start()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Begin RPC.WPWithinHandler.NewWPWithinHander()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="End RPC.WPWithinHandler.NewWPWithinHander()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Starting the rpc server on...: 127.0.0.1:8778" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Begin RPC.WPWithinHandler.Setup()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="begin wpwithin.Initialise()" description="Example WorldpayWithin producer" name="Producer Example CHANGE ME" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will perform parameter validation" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Parameter validation passed" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will create new core.SDKFactory" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Did create new core.SDKFactory" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will create new core.Core" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Did create new core.Core" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will call doWebSocketLogSetup()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Begin wpwithin.doWebSocketLogSetup()" Configuration={true 8182 debug,error,fatal} 
time="2017-08-17T12:24:56+01:00" level=debug msg="Config.WSLogEnable is true -- proceed to setup WS Logger" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Clean up Config.WSLogLevel -- remove spaces" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Split up Config.WSLogLevel to array -- comma delimiter" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Setting up logger to support the specified log levels." log levels=[debug error fatal] 
time="2017-08-17T12:24:56+01:00" level=debug msg="Attempt to get external IPv4 address" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Did get external IPv4" IPv4=172.17.0.149 
time="2017-08-17T12:24:56+01:00" level=debug msg="will call wslog.Initialise()" ip_add=172.17.0.149 log levels=[debug error fatal] ws_port=8182 
time="2017-08-17T12:24:56+01:00" level=info msg="Did set up WebSocket logger @ http://172.17.0.149:8182" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Did call wslog.Initialise()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="End doWebSocketLogSetup()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="After call doWebSocketLogSetup()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will call Factory.GetDevice()" description="Example WorldpayWithin producer" name="Producer Example CHANGE ME" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will call Factory.GetOrderManager()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="After call Factory.GetOrderManager()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will call Factory.GetSvcBroadcaster()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="After call Factory.GetSvcBroadcaster()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will call Factory.GetSvcScanner()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="After call Factory.GetSvcScanner()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="end wpwithin.Initialise()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="wp.callback not set, not setting handler in WPWithin." 
time="2017-08-17T12:24:56+01:00" level=debug msg="End RPC.WPWithinHandler.Setup()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="RPC.WPWithinHandler.InitProducer()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Begin wpwithin.InitProducer()" pspConfig=map[merchant_service_key:T_S_3bdadc9c-54e0-4587-8d91-29813060fecd merchant_client_key:T_C_97e8cbaa-14e0-4b1c-b2af-469daf8f1356 api_endpoint:https://api.worldpay.com/v1 psp_name:worldpayonlinepayments hte_public_key:T_C_97e8cbaa-14e0-4b1c-b2af-469daf8f1356 hte_private_key:T_S_3bdadc9c-54e0-4587-8d91-29813060fecd] 
time="2017-08-17T12:24:56+01:00" level=debug msg="Is pspConfig parameter nil? false" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will call Factory.GetPSPMerchant()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Did call Factory.GetPSPMerchant()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will call hte.NewHTECredential()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Did call hte.NewHTECredential()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will call Factory.GetHTEServiceHandler()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Did call Factory.GetHTEServiceHandler()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will call Factory.GetHTE()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Did call Factory.GetHTE()" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will setup channel of type error make(chan error)" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Did call make(chan error)" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Will spin up goroutine to start HTE service" 
time="2017-08-17T12:24:56+01:00" level=debug msg="Did spin up go routine.. this is main thread." 
time="2017-08-17T12:24:56+01:00" level=debug msg="Inside go routine, will call wp.core.HTE.Start()" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Did wait 750ms, no error" 
time="2017-08-17T12:24:57+01:00" level=debug msg="End wpwithin.InitProducer()" Error result=<nil> 
time="2017-08-17T12:24:57+01:00" level=debug msg="Begin RPC.WPWithinHandler.AddService()" 
time="2017-08-17T12:24:57+01:00" level=debug msg="End RPC.WPWithinHandler.AddService()" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Begin wpwithin.AddService()" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Is wp.core.Device.Services map nil? true" 
time="2017-08-17T12:24:57+01:00" level=debug msg="wp.core.Device.Services is nil, will make now: map[int]*types.Service" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Did make wp.core.Device.Services: map[int]*types.Service" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Does wp.core.Device.Services contain service with id 1? false" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Adding service to wp.core.Device.Services as it doesn't appear to exist." 
time="2017-08-17T12:24:57+01:00" level=debug msg="End wpwithin.AddService()" 
time="2017-08-17T12:24:57+01:00" level=debug msg="RPC.WPWithinHandler.StartServiceBroadcast()" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Begin wpwithin.startServiceBroadcast()" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Will construct types.BroadcastMessage now" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Did construct types.BroadcastMessage" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Will make channel of type error for catching broadcast errors from go routine." 
time="2017-08-17T12:24:57+01:00" level=debug msg="Did make channel of type error" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Will spin up go routine to perform broadcasting" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Did spin up go routine to perform broadcasting" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Inside go routine, will call wp.core.SvcBroadcaster.StartBroadcast(" message={Example WorldpayWithin producer 172.17.0.149 64521 6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f  http://} timeoutmillis=20000 
time="2017-08-17T12:24:57+01:00" level=debug msg="Start svc broadcast" 
time="2017-08-17T12:24:57+01:00" level=debug msg=Broadcasting.. 
time="2017-08-17T12:24:57+01:00" level=debug msg="Did open UDP broadcast socket" 
time="2017-08-17T12:24:57+01:00" level=debug msg="Did successfully write broadcast message" 
time="2017-08-17T12:24:58+01:00" level=debug msg="End wpwithin.startServiceBroadcast()" Result err=<nil> 
time="2017-08-17T12:25:01+01:00" level=debug msg="Begin RPC.WPWithinHandler.Setup()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="begin wpwithin.Initialise()" description="an example consumer device" name=my-device 
time="2017-08-17T12:25:01+01:00" level=debug msg="Will perform parameter validation" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Parameter validation passed" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Will create new core.SDKFactory" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Did create new core.SDKFactory" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Will create new core.Core" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Did create new core.Core" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Will call doWebSocketLogSetup()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Begin wpwithin.doWebSocketLogSetup()" Configuration={true 8182 debug,error,fatal} 
time="2017-08-17T12:25:01+01:00" level=debug msg="Config.WSLogEnable is true -- proceed to setup WS Logger" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Clean up Config.WSLogLevel -- remove spaces" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Split up Config.WSLogLevel to array -- comma delimiter" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Setting up logger to support the specified log levels." log levels=[debug error fatal] 
time="2017-08-17T12:25:01+01:00" level=debug msg="Attempt to get external IPv4 address" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Did get external IPv4" IPv4=172.17.0.149 
time="2017-08-17T12:25:01+01:00" level=debug msg="will call wslog.Initialise()" ip_add=172.17.0.149 log levels=[debug error fatal] ws_port=8182 
time="2017-08-17T12:25:01+01:00" level=info msg="Did set up WebSocket logger @ http://172.17.0.149:8182" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Did call wslog.Initialise()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="End doWebSocketLogSetup()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="After call doWebSocketLogSetup()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Will call Factory.GetDevice()" description="an example consumer device" name=my-device 
time="2017-08-17T12:25:01+01:00" level=debug msg="Will call Factory.GetOrderManager()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="After call Factory.GetOrderManager()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Will call Factory.GetSvcBroadcaster()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="After call Factory.GetSvcBroadcaster()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Will call Factory.GetSvcScanner()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="After call Factory.GetSvcScanner()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="end wpwithin.Initialise()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="wp.callback not set, not setting handler in WPWithin." 
time="2017-08-17T12:25:01+01:00" level=debug msg="End RPC.WPWithinHandler.Setup()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Begin RPC.WPWithinHandler.GetDevice()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Begin wpwithin.GetDevice()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="End wpwithin.GetDevice()" Device=&{6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f my-device an example consumer device map[] 172.17.0.149} 
time="2017-08-17T12:25:01+01:00" level=debug msg="Found 0 services for device" 
time="2017-08-17T12:25:01+01:00" level=debug msg="End RPC.WPWithinHandler.GetDevice()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Begin RPC.WPWithinHandler.ServiceDiscovery()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Begin wpwithin.DeviceDiscovery()" timeoutMillis=8000 
time="2017-08-17T12:25:01+01:00" level=debug msg="Will call wp.core.SvcScanner.ScanForServices()" 
time="2017-08-17T12:25:01+01:00" level=debug msg="Begin ScanForServices(timeout = 8000)" 
time="2017-08-17T12:25:02+01:00" level=debug msg=Broadcasting.. 
time="2017-08-17T12:25:02+01:00" level=debug msg="Did open UDP broadcast socket" 
time="2017-08-17T12:25:02+01:00" level=debug msg="Did successfully write broadcast message" 
time="2017-08-17T12:25:02+01:00" level=debug msg="Did receive message from 172.17.0.149:54204: {\"deviceDescription\":\"Example WorldpayWithin producer\",\"hostname\":\"172.17.0.149\",\"portNumber\":64521,\"serverID\":\"6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f\",\"urlPrefix\":\"\",\"scheme\":\"http://\"}" 
time="2017-08-17T12:25:02+01:00" level=info msg="Did decode broadcast message: types.BroadcastMessage{DeviceDescription:\"Example WorldpayWithin producer\", Hostname:\"172.17.0.149\", PortNumber:64521, ServerID:\"6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f\", URLPrefix:\"\", Scheme:\"http://\"}" 
time="2017-08-17T12:25:07+01:00" level=debug msg=Broadcasting.. 
time="2017-08-17T12:25:07+01:00" level=debug msg="Did open UDP broadcast socket" 
time="2017-08-17T12:25:07+01:00" level=debug msg="Did successfully write broadcast message" 
time="2017-08-17T12:25:07+01:00" level=debug msg="Did receive message from 172.17.0.149:52961: {\"deviceDescription\":\"Example WorldpayWithin producer\",\"hostname\":\"172.17.0.149\",\"portNumber\":64521,\"serverID\":\"6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f\",\"urlPrefix\":\"\",\"scheme\":\"http://\"}" 
time="2017-08-17T12:25:07+01:00" level=info msg="Did decode broadcast message: types.BroadcastMessage{DeviceDescription:\"Example WorldpayWithin producer\", Hostname:\"172.17.0.149\", PortNumber:64521, ServerID:\"6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f\", URLPrefix:\"\", Scheme:\"http://\"}" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Finish ScanForServices()" Found=1 Run=true Timed out=true 
time="2017-08-17T12:25:12+01:00" level=debug msg="Did call wp.core.SvcScanner.ScanForServices()" Count devices=1 
time="2017-08-17T12:25:12+01:00" level=debug msg=Broadcasting.. 
time="2017-08-17T12:25:12+01:00" level=debug msg="Did open UDP broadcast socket" 
time="2017-08-17T12:25:12+01:00" level=info msg="Did find %d devices1" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Did successfully write broadcast message" 
time="2017-08-17T12:25:12+01:00" level=debug msg="After call wp.core.SvcScanner.ScanForService()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="End wpwithin.DeviceDiscovery()" Search result=[{Example WorldpayWithin producer 172.17.0.149 64521 6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f  http://}] 
time="2017-08-17T12:25:12+01:00" level=debug msg="End RPC.WPWithinHandler.ServiceDiscovery()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="RPC.WPWithinHandler.InitConsumer()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Begin wpwithin.InitConsumer()" clientID=6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f hceCard="fname=Bilbo;lname=Baggins;expm=11;expy2018;num=***********4444;cvc=113;type=Card;" hostname=172.17.0.149 portnumber=64521 pspConfig=map[api_endpoint:https://api.worldpay.com/v1 psp_name:worldpayonlinepayments] scheme="http://" urlPrefix= 
time="2017-08-17T12:25:12+01:00" level=debug msg="is pspConfig parameter nil? false" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Will call Factory.GetPSPClient()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="After call Factory.GetPSPClient()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Will call Factory.GetHTEClientHTTP()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="After call to Factory.GetHTEClientHTTP()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Will call hte.NewClient" clientID=6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f hceCard="fname=Bilbo;lname=Baggins;expm=11;expy2018;num=***********4444;cvc=113;type=Card;" hostname=172.17.0.149 portnumber=64521 pspConfig=map[api_endpoint:https://api.worldpay.com/v1 psp_name:worldpayonlinepayments] scheme="http://" urlPrefix= 
time="2017-08-17T12:25:12+01:00" level=debug msg="After call hte.NewClient()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="End wpwithin.InitConsumer()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Begin RPC.WPWithinHandler.RequestServices()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="begin wpwithin.RequestServices()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Will call wp.core.HTEClient.DiscoverService()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Did call wp.core.HTEClient.DiscoverService()" 
time="2017-08-17T12:25:12+01:00" level=info msg="Did find 1 services." 
time="2017-08-17T12:25:12+01:00" level=debug msg="end wpwithin.RequestServices()" Result=[{1 Can charge your hybrid / electric car Car charger}] 
time="2017-08-17T12:25:12+01:00" level=debug msg="End RPC.WPWithinHandler.RequestServices()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="RPC.WPWithinHandler.GetServicePrices()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Begin wpwithin.GetServicePrices()" ServiceID=1 
time="2017-08-17T12:25:12+01:00" level=debug msg="Will call wp.core.HTEClient.GetPrices()" ServiceID=1 
time="2017-08-17T12:25:12+01:00" level=debug msg="Did call wp.core.HTEClient.GetPrices()" 
time="2017-08-17T12:25:12+01:00" level=info msg="Did find 1 prices for service id 1" 
time="2017-08-17T12:25:12+01:00" level=debug msg="End wpwithin.GetServicePrices()" result=[{1 Kilowatt-hour 0xc42015e3c0 1 Kilowatt-hour}] 
time="2017-08-17T12:25:12+01:00" level=debug msg="Begin RPC.WPWithinHandler.SelectService()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Begin wpwithin.SelectService()" numberOfUnits=5 priceID=1 serviceID=1 
time="2017-08-17T12:25:12+01:00" level=debug msg="Will call wp.core.HTEClient.NegotiatePrice()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Did call wp.core.HTEClient.NegotiatePrice()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="End wpwithin.SelectService()" Error=<nil> totalPriceResponse={6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f 6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f 1 5 125 GBP 64e44a08-edad-46fd-41a1-909f2b4b5c9f T_C_97e8cbaa-14e0-4b1c-b2af-469daf8f1356} 
time="2017-08-17T12:25:12+01:00" level=debug msg="End RPC.WPWithinHandler.SelectService()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Begin RPC.WPWithinHandler.MakePayment()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Finised converting thrift.TotalPriceResponse to go.TotalPriceResponse" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Proceeding to call MakePayment internally using converted request object" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Begin wpwithin.MakePayment()" TotalPriceResponse parameter={6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f 6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f 1 5 125  64e44a08-edad-46fd-41a1-909f2b4b5c9f T_C_97e8cbaa-14e0-4b1c-b2af-469daf8f1356} 
time="2017-08-17T12:25:12+01:00" level=debug msg="Will call wp.core.Psp.GetToken()" HCE Card="fname=Bilbo;lname=Baggins;expm=11;expy2018;num=***********4444;cvc=113;type=Card;" Merchant client key="T_C_97e8cbaa-14e0-4b1c-b2af-469daf8f1356" 
time="2017-08-17T12:25:12+01:00" level=debug msg="begin onlineworldpay.GetToken()" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Attempt to marshal token request to JSON" 
time="2017-08-17T12:25:12+01:00" level=debug msg="POST Request Token." Did marshal TokenRequest JSON="{\"reusable\":false,\"paymentMethod\":{\"name\":\"Bilbo Baggins\",\"expiryMonth\":11,\"expiryYear\":2018,\"issueNumber\":null,\"startMonth\":null,\"startYear\":null,\"cardNumber\":\"5555555555554444\",\"type\":\"Card\",\"cvc\":\"113\"},\"clientKey\":\"T_C_97e8cbaa-14e0-4b1c-b2af-469daf8f1356\"}" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Sending Token POST request." RequestJSON="{\"reusable\":false,\"paymentMethod\":{\"name\":\"Bilbo Baggins\",\"expiryMonth\":11,\"expiryYear\":2018,\"issueNumber\":null,\"startMonth\":null,\"startYear\":null,\"cardNumber\":\"5555555555554444\",\"type\":\"Card\",\"cvc\":\"113\"},\"clientKey\":\"T_C_97e8cbaa-14e0-4b1c-b2af-469daf8f1356\"}" Url="https://api.worldpay.com/v1/tokens" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Response status code" Code=200 
time="2017-08-17T12:25:12+01:00" level=debug msg="Response body: {\"token\":\"TEST_SU_74688d29-261b-46bb-820c-2dab3afd3184\",\"paymentMethod\":{\"type\":\"ObfuscatedCard\",\"name\":\"Bilbo Baggins\",\"expiryMonth\":11,\"expiryYear\":2018,\"cardType\":\"MASTERCARD_CREDIT\",\"maskedCardNumber\":\"**** **** **** 4444\",\"cardSchemeType\":\"consumer\",\"cardSchemeName\":\"MCI CREDIT\",\"cardIssuer\":\"LLOYDS BANK PLC\",\"countryCode\":\"GB\",\"cardClass\":\"credit\",\"cardProductTypeDescNonContactless\":\"MasterCard Business\",\"cardProductTypeDescContactless\":\"CL MasterCard Bus\",\"prepaid\":\"unknown\"},\"reusable\":false}" 
time="2017-08-17T12:25:12+01:00" level=debug msg="POST response code = HTTPOK, attempting to unmarshal and return" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Did call wp.core.Psp.GetToken() without error." Token="TEST_SU_74688d29-261b-46bb-820c-2dab3afd3184" 
time="2017-08-17T12:25:12+01:00" level=debug msg="will call wp.core.HTEClient.MakeHtePayment()" Client ID=6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f Payment reference ID=64e44a08-edad-46fd-41a1-909f2b4b5c9f token="TEST_SU_74688d29-261b-46bb-820c-2dab3afd3184" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Begin OWP MakePayment" Amount=125 ClientToken="TEST_SU_74688d29-261b-46bb-820c-2dab3afd3184" CurrencyCode=GBP CustomerOrderCode=64e44a08-edad-46fd-41a1-909f2b4b5c9f OrderDescription="Car charger - 5 units @ GBP 0.25 per unit." 
time="2017-08-17T12:25:12+01:00" level=debug msg="JSON form of OrderRequest object." JSON="{\"token\":\"TEST_SU_74688d29-261b-46bb-820c-2dab3afd3184\",\"amount\":125,\"currencyCode\":\"GBP\",\"orderDescription\":\"Car charger - 5 units @ GBP 0.25 per unit.\",\"customerOrderCode\":\"64e44a08-edad-46fd-41a1-909f2b4b5c9f\"}" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Using OWP parameters" MerchantSvcKey="T_S_3bdadc9c-54e0-4587-8d91-29813060fecd" Request URL="https://api.worldpay.com/v1/orders" 
time="2017-08-17T12:25:12+01:00" level=debug msg="Sending Order POST request." RequestJSON="{\"token\":\"TEST_SU_74688d29-261b-46bb-820c-2dab3afd3184\",\"amount\":125,\"currencyCode\":\"GBP\",\"orderDescription\":\"Car charger - 5 units @ GBP 0.25 per unit.\",\"customerOrderCode\":\"64e44a08-edad-46fd-41a1-909f2b4b5c9f\"}" Url="https://api.worldpay.com/v1/orders" 
time="2017-08-17T12:25:13+01:00" level=debug msg="Response status code" Code=200 
time="2017-08-17T12:25:13+01:00" level=debug msg="Response body: {\"orderCode\":\"44f1cd69-4b56-4de2-888c-59987dc9bb9a\",\"token\":\"TEST_SU_74688d29-261b-46bb-820c-2dab3afd3184\",\"orderDescription\":\"Car charger - 5 units @ GBP 0.25 per unit.\",\"amount\":125,\"currencyCode\":\"GBP\",\"paymentStatus\":\"SUCCESS\",\"paymentResponse\":{\"type\":\"ObfuscatedCard\",\"name\":\"Bilbo Baggins\",\"expiryMonth\":11,\"expiryYear\":2018,\"cardType\":\"MASTERCARD_CREDIT\",\"maskedCardNumber\":\"**** **** **** 4444\",\"cardSchemeType\":\"consumer\",\"cardSchemeName\":\"MCI CREDIT\",\"cardIssuer\":\"LLOYDS BANK PLC\",\"countryCode\":\"GB\",\"cardClass\":\"credit\",\"cardProductTypeDescNonContactless\":\"MasterCard Business\",\"cardProductTypeDescContactless\":\"CL MasterCard Bus\",\"prepaid\":\"unknown\"},\"customerOrderCode\":\"64e44a08-edad-46fd-41a1-909f2b4b5c9f\",\"environment\":\"TEST\",\"riskScore\":{\"value\":\"1\"},\"resultCodes\":{\"avsResultCode\":\"NOT_SUPPLIED_BY_SHOPPER\",\"cvcResultCode\":\"APPROVED\"}}" 
time="2017-08-17T12:25:13+01:00" level=debug msg="POST response code = HTTPOK, attempting to unmarshal and return" 
time="2017-08-17T12:25:13+01:00" level=debug msg="Did call wp.core.HTEClient.MakeHtePayment() without error" 
time="2017-08-17T12:25:13+01:00" level=debug msg="End wpwithin.MakePayment()" PaymentResponse={6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f 6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f 125 0xc42017c000} 
time="2017-08-17T12:25:13+01:00" level=debug msg="End RPC.WPWithinHandler.MakePayment()" 
time="2017-08-17T12:25:13+01:00" level=debug msg="begin rpc.WPWithinHandler.BeginServiceDelivery()" serviceDeliveryToken=ServiceDeliveryToken({Key:64e44a08-edad-46fd-41a1-909f2b4b5c9f Issued:2017-08-17T12:25:13Z Expiry:2017-08-24T12:25:13Z RefundOnExpiry:false Signature:[]}) serviceID=1 unitsToSupply=5 
time="2017-08-17T12:25:13+01:00" level=debug msg="begin wpwithin.wpwithinimpl.BeginServiceDelivery()" serviceDeliveryToken="{Key:64e44a08-edad-46fd-41a1-909f2b4b5c9f Issued:2017-08-17 12:25:13 +0000 UTC Expiry:2017-08-24 12:25:13 +0000 UTC RefundOnExpiry:false Signature:[]}" serviceID=1 unitsToSupply=5 
time="2017-08-17T12:25:13+01:00" level=debug msg="Will call wp.core.HTEClient.StartDelivery()" 
time="2017-08-17T12:25:13+01:00" level=debug msg="hte.clientImpl.StartDelivery()" serviceDeliveryToken={64e44a08-edad-46fd-41a1-909f2b4b5c9f 2017-08-17 12:25:13 +0000 UTC 2017-08-24 12:25:13 +0000 UTC false []} serviceId=1 unitsToSupply=5 
time="2017-08-17T12:25:13+01:00" level=debug msg="begin hte.ServiceHandlerImpl.ServiceDeliveryBegin()" 
time="2017-08-17T12:25:13+01:00" level=debug msg="ORDER:: &{UUID:64e44a08-edad-46fd-41a1-909f2b4b5c9f Service:{ID:1 Name:Car charger Description:Can charge your hybrid / electric car Prices:map[1:{ID:1 Description:Kilowatt-hour PricePerUnit:0xc42018c360 UnitID:1 UnitDescription:Kilowatt-hour}]} SelectedPriceID:1 ClientID:6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f SelectedNumberOfUnits:5 PSPReference:44f1cd69-4b56-4de2-888c-59987dc9bb9a DeliveryToken:{Key:64e44a08-edad-46fd-41a1-909f2b4b5c9f Issued:2017-08-17 12:25:13.207513699 +0100 BST Expiry:2017-08-24 12:25:13.207513733 +0100 BST RefundOnExpiry:false Signature:[]} ConsumedUnits:0}" 
time="2017-08-17T12:25:13+01:00" level=debug msg="REQ SDT Key: 64e44a08-edad-46fd-41a1-909f2b4b5c9f" 
time="2017-08-17T12:25:13+01:00" level=debug msg="end hte.ServiceHandlerImpl.ServiceDeliveryBegin()" 
time="2017-08-17T12:25:13+01:00" level=debug msg="end hte.clientImpl.EndDelivery()" 
time="2017-08-17T12:25:13+01:00" level=debug msg="Did call wp.core.HTEClient.StartDelivery()" delivery response={6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f 6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f {64e44a08-edad-46fd-41a1-909f2b4b5c9f 2017-08-17 12:25:13 +0000 UTC 2017-08-24 12:25:13 +0000 UTC false []} 5} 
time="2017-08-17T12:25:13+01:00" level=debug msg="end wpwithin.wpwithinimpl.BeginServiceDelivery()" 
time="2017-08-17T12:25:13+01:00" level=debug msg="end rpc.WPWithinHandler.BeginServiceDelivery()" 
time="2017-08-17T12:25:17+01:00" level=debug msg="Did close UDP broadcast socket" 
time="2017-08-17T12:25:17+01:00" level=debug msg="Finished broadcasting" Run=true Timed out=true 
time="2017-08-17T12:25:23+01:00" level=debug msg="begin rpc.WPWithinHandler.EndServiceDelivery()" serviceDeliveryToken=ServiceDeliveryToken({Key:64e44a08-edad-46fd-41a1-909f2b4b5c9f Issued:2017-08-17T12:25:13Z Expiry:2017-08-24T12:25:13Z RefundOnExpiry:false Signature:[]}) serviceID=1 unitsReceived=5 
time="2017-08-17T12:25:23+01:00" level=debug msg="begin wpwithin.wpwithinimpl.EndServiceDelivery()" serviceDeliveryToken="{Key:64e44a08-edad-46fd-41a1-909f2b4b5c9f Issued:2017-08-17 12:25:13 +0000 UTC Expiry:2017-08-24 12:25:13 +0000 UTC RefundOnExpiry:false Signature:[]}" serviceID=1 unitsReceived=5 
time="2017-08-17T12:25:23+01:00" level=debug msg="Will call wp.core.HTEClient.EndDelivery()" 
time="2017-08-17T12:25:23+01:00" level=debug msg="begin hte.ServiceHandlerImpl.ServiceDeliveryEnd()" 
time="2017-08-17T12:25:23+01:00" level=debug msg="end hte.ServiceHandlerImpl.ServiceDeliveryEnd()" 
time="2017-08-17T12:25:23+01:00" level=debug msg="Did call wp.core.HTEClient.EndDelivery()" DeliveryResponse={6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f 6a72c89d-d02e-4a2c-5bd0-0b760ec42b8f {64e44a08-edad-46fd-41a1-909f2b4b5c9f 2017-08-17 12:25:13 +0000 UTC 2017-08-24 12:25:13 +0000 UTC false []} 5 0} 
time="2017-08-17T12:25:23+01:00" level=debug msg="end wpwithin.wpwithinimpl.EndServiceDelivery()" 
time="2017-08-17T12:25:23+01:00" level=debug msg="end rpc.WPWithinHandler.EndServiceDelivery()" 
